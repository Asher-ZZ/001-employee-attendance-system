<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	template="/common/commonLayout.xhtml">

	<ui:define name="title">Employee Management Dashboard</ui:define>

	<ui:define name="content">
		<style>
.dashboard-container {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
	gap: 20px;
	padding: 20px;
}

.stat-card {
	background: white;
	padding: 20px;
	border-radius: 8px;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	height: 180px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.stat-card h3 {
	margin-top: 0;
	color: #2c3e50;
	border-bottom: 1px solid #eee;
	padding-bottom: 10px;
	font-size: 16px;
	font-weight: 600;
}

.stat-value {
	font-size: 28px;
	font-weight: bold;
	color: #4285f4;
	margin: 10px 0;
}

.quick-actions {
	display: flex;
	gap: 15px;
	margin: 20px;
	padding: 0 20px;
	flex-wrap: wrap;
}

.action-btn {
	padding: 12px 24px;
	background: #4285f4;
	color: white;
	border: none;
	border-radius: 4px;
	cursor: pointer;
	transition: background 0.3s;
	font-weight: 500;
	min-width: 160px;
}

.action-btn:hover {
	background: #3367d6;
}

.attendance-chart {
	width: 100%;
	height: 20px;
	background: #ecf0f1;
	border-radius: 10px;
	overflow: hidden;
	margin: 10px 0;
}

.attendance-fill {
	height: 100%;
	background: #4285f4;
	border-radius: 10px;
	transition: width 0.5s ease;
}

.notification-badge {
	background: #ea4335;
	color: white;
	border-radius: 50%;
	width: 24px;
	height: 24px;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	font-size: 12px;
	margin-left: 8px;
	vertical-align: middle;
}

.recent-activity {
	background: white;
	padding: 20px;
	border-radius: 8px;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	margin: 20px;
}

.recent-activity h3 {
	margin-top: 0;
	color: #2c3e50;
	border-bottom: 1px solid #eee;
	padding-bottom: 10px;
	font-size: 18px;
	font-weight: 600;
}

.activity-list {
	list-style-type: none;
	padding: 0;
	margin: 0;
}

.activity-item {
	padding: 12px 10px;
	border-bottom: 1px solid #eee;
	display: flex;
	align-items: center;
}

.activity-item:last-child {
	border-bottom: none;
}

.activity-icon {
	margin-right: 10px;
	color: #4285f4;
	font-size: 16px;
}

@media ( max-width : 768px) {
	.dashboard-container {
		grid-template-columns: 1fr;
	}
	.quick-actions {
		flex-direction: column;
	}
	.action-btn {
		width: 100%;
	}
}
</style>

		<!-- Global messages -->
		<h:form id="globalMessageForm">
			<p:growl id="msgs" escape="false" globalOnly="true" life="5000"
				showDetail="true" />
		</h:form>

		<div class="quick-actions">
			<p:commandButton value="Mark Attendance" icon="pi pi-check"
				styleClass="action-btn" action="attendanceForm" />
			<p:commandButton value="Request Leave" icon="pi pi-calendar"
				styleClass="action-btn" action="leaveForm" />

		</div>

		<div class="dashboard-container">
			<div class="stat-card">
				<h3>Today's Attendance</h3>
				<div class="stat-value">#{dashboardBean.todayAttendance}%</div>
				<div class="attendance-chart">
					<div class="attendance-fill"
						style="width: #{dashboardBean.todayAttendance}%;"></div>
				</div>
				<p>#{dashboardBean.presentEmployees}/#{dashboardBean.totalEmployees}
					employees present</p>
			</div>

			<div class="stat-card">
				<h3>
					Pending Approvals <span class="notification-badge">#{dashboardBean.pendingApprovals}</span>
				</h3>
				<div class="stat-value">#{dashboardBean.pendingApprovals}
					requests</div>
				<p>Leave requests awaiting your action</p>
			</div>

			<div class="stat-card">
				<h3>Late Arrivals</h3>
				<div class="stat-value">#{dashboardBean.lateArrivals}</div>
				<p>Employees arrived late today</p>
			</div>

			<div class="stat-card">
				<h3>On Leave</h3>
				<div class="stat-value">#{dashboardBean.onLeave}</div>
				<p>Employees on leave today</p>
			</div>
		</div>

		<div class="recent-activity">
			<h3>Recent Activity</h3>
			<ul class="activity-list">
				<ui:repeat value="#{dashboardBean.recentActivities}" var="activity">
					<li class="activity-item"><span
						class="activity-icon pi pi-info-circle"></span> #{activity}</li>
				</ui:repeat>
			</ul>
		</div>

		<!-- Quick Access Panels -->
		<div class="dashboard-container"
			style="grid-template-columns: 1fr 1fr;">
			<p:panel header="Quick Employee Access" style="margin-bottom:20px;">
				<p:dataList value="#{dashboardBean.recentEmployees}" var="emp"
					itemType="none" style="margin-bottom:0">
					<p:commandLink value="#{emp.fullName} - #{emp.department}"
						action="#{dashboardBean.viewEmployee(emp)}"
						style="display:block; padding:5px 0;" />
				</p:dataList>
				<p:separator />
				<p:commandButton value="View All Employees" icon="pi pi-users"
					action="#{dashboardBean.navigateToEmployees}"
					styleClass="p-button-text" />
			</p:panel>

			<p:panel header="Quick Leave Management" style="margin-bottom:20px;">
				<p:dataList value="#{dashboardBean.recentLeaveRequests}" var="leave"
					itemType="none" style="margin-bottom:0">
					<p:commandLink
						value="#{leave.employee.fullName} - #{leave.leaveType}"
						action="#{dashboardBean.viewLeaveRequest(leave)}"
						style="display:block; padding:5px 0;" />
				</p:dataList>
				<p:separator />
				<p:commandButton value="Manage Leave Requests"
					icon="pi pi-calendar-minus"
					action="#{dashboardBean.navigateToLeaveManagement}"
					styleClass="p-button-text" />
			</p:panel>
		</div>
	</ui:define>
</ui:composition>