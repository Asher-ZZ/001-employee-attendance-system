<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	template="/common/commonLayout.xhtml">
	<ui:define name="content">
		<f:view>
			<h:head>
				<title>Leave Request Management</title>
				<style>
.leave-container {
	padding: 20px;
	font-family: 'Segoe UI', Arial, sans-serif;
}

.header {
	background-color: #2c3e50;
	color: white;
	padding: 15px;
	border-radius: 5px;
	margin-bottom: 20px;
}

.form-panel {
	margin-bottom: 25px;
	box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.status-pending {
	color: #e67e22;
	font-weight: bold;
}

.status-approved {
	color: #27ae60;
	font-weight: bold;
}

.status-rejected {
	color: #e74c3c;
	font-weight: bold;
}

.action-button {
	margin-right: 5px;
}
</style>
			</h:head>

			<h:body>
				<div class="leave-container">
					<div class="header">
						<h2>Leave Request Management System</h2>
					</div>

					<!-- Leave Request Form -->
					<p:panel header="New Leave Request" styleClass="form-panel">
						<h:form id="leaveForm">
							<p:growl id="messages" showDetail="true" life="3000" />

							<div class="ui-g">
								<div class="ui-g-12 ui-md-6">
									<p:outputLabel for="leaveType" value="Leave Type *" />
									<p:selectOneMenu id="leaveType"
										value="#{leaveRequestController.leaveRequest.leaveType}"
										required="true" requiredMessage="Leave type is required">
										<f:selectItem itemLabel="Select Leave Type" itemValue="" />
										<f:selectItem itemLabel="Annual Leave" itemValue="ANNUAL" />
										<f:selectItem itemLabel="Sick Leave" itemValue="SICK" />
										<f:selectItem itemLabel="Maternity Leave"
											itemValue="MATERNITY" />
										<f:selectItem itemLabel="Paternity Leave"
											itemValue="PATERNITY" />
										<f:selectItem itemLabel="Unpaid Leave" itemValue="UNPAID" />
									</p:selectOneMenu>
								</div>

								<div class="ui-g-12 ui-md-6">
									<p:outputLabel for="startDate" value="Start Date *" />
									<p:calendar id="startDate"
										value="#{leaveRequestController.leaveRequest.startDate}"
										pattern="dd-MM-yyyy" required="true"
										requiredMessage="Start date is required" />
								</div>

								<div class="ui-g-12 ui-md-6">
									<p:outputLabel for="endDate" value="End Date *" />
									<p:calendar id="endDate"
										value="#{leaveRequestController.leaveRequest.endDate}"
										pattern="dd-MM-yyyy" required="true"
										requiredMessage="End date is required" />
								</div>

								<div class="ui-g-12 ui-md-6">
									<p:outputLabel for="status" value="Status *" />
									<p:selectOneMenu id="status"
										value="#{leaveRequestController.leaveRequest.status}"
										required="true" requiredMessage="Status is required">
										<f:selectItem itemLabel="Select Status" itemValue="" />
										<f:selectItem itemLabel="Pending" itemValue="PENDING" />
										<f:selectItem itemLabel="Approved" itemValue="APPROVED" />
										<f:selectItem itemLabel="Rejected" itemValue="REJECTED" />
									</p:selectOneMenu>
								</div>

								<div class="ui-g-12">
									<p:outputLabel for="reason" value="Reason *" />
									<p:inputTextarea id="reason"
										value="#{leaveRequestController.leaveRequest.reason}" rows="4"
										cols="50" required="true" requiredMessage="Reason is required" />
								</div>

								<div class="ui-g-12" style="margin-top: 20px;">
									<p:commandButton value="Submit"
										action="#{leaveRequestController.save()}"
										update=":leaveForm:messages :listForm:leaveTable"
										styleClass="action-button" />
									<p:commandButton value="Reset" type="reset"
										styleClass="action-button" />
								</div>
							</div>
						</h:form>
					</p:panel>

					<!-- Leave Requests Data Table -->
					<p:panel header="Existing Leave Requests" styleClass="form-panel">
						<h:form id="listForm">
							<p:dataTable id="leaveTable" var="request"
								value="#{leaveRequestController.leaveRequests}" paginator="true"
								rows="10"
								paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
								rowsPerPageTemplate="5,10,15"
								emptyMessage="No leave requests found">

								<p:column headerText="Leave Type" sortBy="#{request.leaveType}"
									filterBy="#{request.leaveType}">
									<h:outputText value="#{request.leaveType}" />
								</p:column>

								<p:column headerText="Start Date" sortBy="#{request.startDate}">
									<h:outputText value="#{request.startDate}">
										<f:convertDateTime pattern="dd-MMM-yyyy" />
									</h:outputText>
								</p:column>

								<p:column headerText="End Date" sortBy="#{request.endDate}">
									<h:outputText value="#{request.endDate}">
										<f:convertDateTime pattern="dd-MMM-yyyy" />
									</h:outputText>
								</p:column>

								<p:column headerText="Reason" sortBy="#{request.reason}"
									filterBy="#{request.reason}">
									<h:outputText value="#{request.reason}" />
								</p:column>

								<p:column headerText="Status" sortBy="#{request.status}"
									filterBy="#{request.status}">
									<h:outputText value="#{request.status}"
										styleClass="status-#{request.status.toLowerCase()}" />
								</p:column>

								<p:column headerText="Actions" style="width:120px">
									<p:commandButton icon="ui-icon-pencil" title="Edit"
										update=":leaveForm" oncomplete="PF('editDialog').show()"
										styleClass="action-button">
										<f:setPropertyActionListener value="#{request}"
											target="#{leaveRequestController.selectedLeaveRequest}" />
									</p:commandButton>

									<p:commandButton icon="ui-icon-trash" title="Delete"
										action="#{leaveRequestController.delete(request)}"
										update=":listForm:leaveTable :leaveForm:messages"
										styleClass="action-button">
										<p:confirm header="Confirmation"
											message="Are you sure you want to delete this leave request?"
											icon="ui-icon-alert" />
									</p:commandButton>
								</p:column>
							</p:dataTable>

							<p:confirmDialog global="true" showEffect="fade"
								hideEffect="fade">
								<p:commandButton value="Yes" type="button"
									styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
								<p:commandButton value="No" type="button"
									styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
							</p:confirmDialog>
						</h:form>
					</p:panel>

					<!-- Edit Dialog -->
					<p:dialog header="Edit Leave Request" widgetVar="editDialog"
						modal="true" resizable="false" style="width:600px">
						<h:form id="editForm">
							<div class="ui-g" style="margin: 0">
								<div class="ui-g-12 ui-md-6">
									<p:outputLabel for="editLeaveType" value="Leave Type *" />
									<p:selectOneMenu id="editLeaveType"
										value="#{leaveRequestController.selectedLeaveRequest.leaveType}"
										required="true">
										<f:selectItem itemLabel="Annual Leave" itemValue="ANNUAL" />
										<f:selectItem itemLabel="Sick Leave" itemValue="SICK" />
										<f:selectItem itemLabel="Maternity Leave"
											itemValue="MATERNITY" />
										<f:selectItem itemLabel="Paternity Leave"
											itemValue="PATERNITY" />
										<f:selectItem itemLabel="Unpaid Leave" itemValue="UNPAID" />
									</p:selectOneMenu>
								</div>

								<div class="ui-g-12 ui-md-6">
									<p:outputLabel for="editStartDate" value="Start Date *" />
									<p:calendar id="editStartDate"
										value="#{leaveRequestController.selectedLeaveRequest.startDate}"
										pattern="dd-MM-yyyy" required="true" />
								</div>

								<div class="ui-g-12 ui-md-6">
									<p:outputLabel for="editEndDate" value="End Date *" />
									<p:calendar id="editEndDate"
										value="#{leaveRequestController.selectedLeaveRequest.endDate}"
										pattern="dd-MM-yyyy" required="true" />
								</div>

								<div class="ui-g-12 ui-md-6">
									<p:outputLabel for="editStatus" value="Status *" />
									<p:selectOneMenu id="editStatus"
										value="#{leaveRequestController.selectedLeaveRequest.status}"
										required="true">
										<f:selectItem itemLabel="Pending" itemValue="PENDING" />
										<f:selectItem itemLabel="Approved" itemValue="APPROVED" />
										<f:selectItem itemLabel="Rejected" itemValue="REJECTED" />
									</p:selectOneMenu>
								</div>

								<div class="ui-g-12">
									<p:outputLabel for="editReason" value="Reason *" />
									<p:inputTextarea id="editReason"
										value="#{leaveRequestController.selectedLeaveRequest.reason}"
										rows="4" cols="50" required="true" />
								</div>

								<div class="ui-g-12"
									style="margin-top: 20px; text-align: right;">
									<p:commandButton value="Update"
										action="#{leaveRequestController.update()}"
										update=":listForm:leaveTable :leaveForm:messages"
										oncomplete="PF('editDialog').hide()"
										styleClass="action-button" />
									<p:commandButton value="Cancel"
										onclick="PF('editDialog').hide()" type="button"
										styleClass="action-button" />
								</div>
							</div>
						</h:form>
					</p:dialog>

				</div>
			</h:body>
		</f:view>
	</ui:define>
</ui:composition>
